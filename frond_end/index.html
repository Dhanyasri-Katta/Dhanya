<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Quiz App</title>
    <!-- Primary CDNs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js" integrity="sha512-8Q6Y9XnTbOE6W4VSpJ8Eg85F4Z7KXJ0h6Ouam9s6BmaS3W3Pd3MhDSf3M1uLnm0bLGg1M3+58hJ3z2cczHN3wpA==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js" integrity="sha512-MiD0M5uR71IdQQHacW+ziDiW/1Y1bS3V1m0J9aE9Y1uHy0Sk4oqIm7+EKABz+2pYJ1R3jt2W+AZxO4SkCLP3vAg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js" integrity="sha512-6W1O8MdzgN6G9ZHyZ9KHYd3wY+LOf2zS4+poglw3F2dykT3lOZ8jXvKnI3lXHSbgwX2DIKmdFR0vF3WvFLdF3g==" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Fallback CDNs -->
    <script>
        window.addEventListener('error', function (e) {
            if (e.target.tagName === 'SCRIPT') {
                console.error('Failed to load script: ' + e.target.src);
                if (e.target.src.includes('react.production.min.js') && !window.React) {
                    const script = document.createElement('script');
                    script.src = 'https://unpkg.com/react@18.2.0/umd/react.production.min.js';
                    document.head.appendChild(script);
                    console.log('Attempting to load React from unpkg');
                } else if (e.target.src.includes('react-dom.production.min.js') && !window.ReactDOM) {
                    const script = document.createElement('script');
                    script.src = 'https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js';
                    document.head.appendChild(script);
                    console.log('Attempting to load ReactDOM from unpkg');
                } else if (e.target.src.includes('babel.min.js') && !window.Babel) {
                    const script = document.createElement('script');
                    script.src = 'https://unpkg.com/@babel/standalone@7.22.5/babel.min.js';
                    document.head.appendChild(script);
                    console.log('Attempting to load Babel from unpkg');
                }
            }
        });
    </script>
</head>
<body>
    <div id="root"></div>
    <div id="error" class="text-red-500 text-center p-4"></div>
    <div id="fallback" class="text-center p-4" style="display: none;">
        Loading app... If this message persists, check your internet connection or browser console for errors. Ensure you're running via a local server (e.g., `npx http-server`).
    </div>
    <script type="text/babel">
        try {
            document.getElementById("fallback").style.display = "block";
            console.log("Starting app load...");
            const { useState, useEffect } = React;

            const subjects = [
                { name: "C", color: "bg-red-400" },
                { name: "JAVA", color: "bg-orange-400" },
                { name: "PYTHON", color: "bg-green-400" },
                { name: "ARRAYS", color: "bg-yellow-400" },
                { name: "DATA STRUCTURES", color: "bg-purple-400" }
            ];

            const subtopics = {
                C: [
                    { name: "C Basics", color: "bg-red-500" },
                    { name: "C Loops", color: "bg-red-500" },
                    { name: "Pointers in C", color: "bg-red-500" },
                    { name: "C Functions", color: "bg-red-500" },
                    { name: "Structures in C", color: "bg-red-500" }
                ],
                JAVA: [
                    { name: "Java Basics", color: "bg-orange-500" },
                    { name: "OOP Concepts", color: "bg-orange-500" },
                    { name: "Inheritance", color: "bg-orange-500" },
                    { name: "Exception Handling", color: "bg-orange-500" },
                    { name: "Multithreading", color: "bg-orange-500" }
                ],
                PYTHON: [
                    { name: "Python Basics", color: "bg-green-500" },
                    { name: "Data Types", color: "bg-green-500" },
                    { name: "Loops & Functions", color: "bg-green-500" },
                    { name: "OOP in Python", color: "bg-green-500" },
                    { name: "Modules", color: "bg-green-500" }
                ],
                ARRAYS: [
                    { name: "1D Arrays", color: "bg-yellow-500" },
                    { name: "2D Arrays", color: "bg-yellow-500" },
                    { name: "Array Sorting", color: "bg-yellow-500" },
                    { name: "Searching in Arrays", color: "bg-yellow-500" },
                    { name: "Array Rotations", color: "bg-yellow-500" }
                ],
                "DATA STRUCTURES": [
                    { name: "Arrays & Linked Lists", color: "bg-purple-500" },
                    { name: "Stacks & Queues", color: "bg-purple-500" },
                    { name: "Trees", color: "bg-purple-500" },
                    { name: "Graphs", color: "bg-purple-500" },
                    { name: "Hashing", color: "bg-purple-500" }
                ]
            };

            const quizQuestions = {
                C: {
                    "C Basics": [
                        { question: "What is the correct syntax for the main function?", options: ["void main()", "int main()", "main()", "start()"], answer: "int main()" },
                        { question: "Which header file is used for input/output?", options: ["stdio.h", "stdlib.h", "string.h", "math.h"], answer: "stdio.h" },
                        { question: "What is the size of an int (typically)?", options: ["2 bytes", "4 bytes", "8 bytes", "1 byte"], answer: "4 bytes" },
                        { question: "Which symbol declares a variable?", options: ["&", "*", ";", ","], answer: ";" },
                        { question: "What does 'const' do?", options: ["Makes variable constant", "Declares function", "Creates pointer", "Defines loop"], answer: "Makes variable constant" }
                    ],
                    "C Loops": [
                        { question: "Which loop executes at least once?", options: ["for", "while", "do-while", "if"], answer: "do-while" },
                        { question: "What is the syntax for a for loop?", options: ["for(init; condition; update)", "for(condition)", "loop(init; condition)", "for(start; end)"], answer: "for(init; condition; update)" },
                        { question: "What does 'break' do?", options: ["Exits loop", "Skips iteration", "Restarts loop", "Pauses loop"], answer: "Exits loop" },
                        { question: "What does 'continue' do?", options: ["Skips iteration", "Exits loop", "Restarts loop", "Pauses loop"], answer: "Skips iteration" },
                        { question: "Which loop checks condition first?", options: ["for", "while", "do-while", "All"], answer: "while" }
                    ],
                    "Pointers in C": [
                        { question: "What symbol dereferences a pointer?", options: ["*", "&", "->", "."], answer: "*" },
                        { question: "What does '&' get?", options: ["Address", "Value", "Type", "Size"], answer: "Address" },
                        { question: "What is a null pointer?", options: ["Points to 0", "Points to nothing", "Points to main", "Points to itself"], answer: "Points to nothing" },
                        { question: "How to declare a pointer?", options: ["int *ptr", "int &ptr", "int ptr[]", "int ptr"], answer: "int *ptr" },
                        { question: "What does '->' access?", options: ["Struct via pointer", "Struct via variable", "Array index", "Function call"], answer: "Struct via pointer" }
                    ],
                    "C Functions": [
                        { question: "What keyword defines a function return type?", options: ["func", "void", "return", "def"], answer: "return" },
                        { question: "What does 'void' mean in a function?", options: ["No return", "Returns int", "Returns pointer", "No parameters"], answer: "No return" },
                        { question: "How to pass by reference?", options: ["Use pointer", "Use value", "Use array", "Use struct"], answer: "Use pointer" },
                        { question: "What is a function prototype?", options: ["Declaration", "Definition", "Call", "Return"], answer: "Declaration" },
                        { question: "What is recursion?", options: ["Function calls itself", "Loop", "Pointer", "Struct"], answer: "Function calls itself" }
                    ],
                    "Structures in C": [
                        { question: "What keyword defines a structure?", options: ["struct", "class", "union", "enum"], answer: "struct" },
                        { question: "How to access struct members?", options: [".", "->", "*", "&"], answer: "." },
                        { question: "Can structs contain functions?", options: ["No", "Yes", "Only pointers", "Only arrays"], answer: "No" },
                        { question: "What is a typedef in struct?", options: ["Alias", "Pointer", "Function", "Variable"], answer: "Alias" },
                        { question: "What is a union?", options: ["Shares memory", "Separate memory", "Array", "Pointer"], answer: "Shares memory" }
                    ]
                },
                JAVA: {
                    "Java Basics": [
                        { question: "What is the main method signature?", options: ["void main()", "public static void main(String[] args)", "main(String args)", "start()"], answer: "public static void main(String[] args)" },
                        { question: "Which keyword declares a variable?", options: ["var", "int", "let", "const"], answer: "int" },
                        { question: "What is the default value of int?", options: ["0", "null", "undefined", "-1"], answer: "0" },
                        { question: "Which package is used for Scanner?", options: ["java.util", "java.io", "java.lang", "java.net"], answer: "java.util" },
                        { question: "What is 'final' keyword?", options: ["Constant", "Variable", "Method", "Class"], answer: "Constant" }
                    ],
                    "OOP Concepts": [
                        { question: "What is encapsulation?", options: ["Data hiding", "Inheritance", "Polymorphism", "Abstraction"], answer: "Data hiding" },
                        { question: "What is polymorphism?", options: ["Multiple forms", "Single form", "Data hiding", "Inheritance"], answer: "Multiple forms" },
                        { question: "What is abstraction?", options: ["Hiding complexity", "Code reuse", "Data binding", "Threading"], answer: "Hiding complexity" },
                        { question: "What does a class define?", options: ["Blueprint", "Object", "Method", "Variable"], answer: "Blueprint" },
                        { question: "What is an object?", options: ["Instance of class", "Class definition", "Method", "Variable"], answer: "Instance of class" }
                    ],
                    "Inheritance": [
                        { question: "Which keyword is used for inheritance?", options: ["extends", "implements", "super", "this"], answer: "extends" },
                        { question: "What is 'super' keyword?", options: ["Parent class", "Child class", "Method", "Variable"], answer: "Parent class" },
                        { question: "Can Java have multiple inheritance?", options: ["No", "Yes", "Only interfaces", "Only classes"], answer: "No" },
                        { question: "What is a subclass?", options: ["Child class", "Parent class", "Interface", "Method"], answer: "Child class" },
                        { question: "What does 'implements' do?", options: ["Inherits interface", "Inherits class", "Defines method", "Creates object"], answer: "Inherits interface" }
                    ],
                    "Exception Handling": [
                        { question: "Which keyword catches exceptions?", options: ["catch", "throw", "throws", "try"], answer: "catch" },
                        { question: "What is 'try' block?", options: ["Monitors errors", "Throws errors", "Catches errors", "Defines errors"], answer: "Monitors errors" },
                        { question: "What does 'throws' do?", options: ["Declares exception", "Catches exception", "Throws exception", "Ignores exception"], answer: "Declares exception" },
                        { question: "What is a checked exception?", options: ["Compile-time", "Runtime", "Optional", "Ignored"], answer: "Compile-time" },
                        { question: "What is 'finally' block?", options: ["Always executes", "Catches errors", "Throws errors", "Optional"], answer: "Always executes" }
                    ],
                    "Multithreading": [
                        { question: "What is a thread?", options: ["Execution unit", "Class", "Method", "Variable"], answer: "Execution unit" },
                        { question: "How to create a thread?", options: ["Extend Thread", "Use class", "Use interface", "Use method"], answer: "Extend Thread" },
                        { question: "What is 'synchronized'?", options: ["Thread safety", "Thread creation", "Thread termination", "Thread priority"], answer: "Thread safety" },
                        { question: "What does 'Runnable' do?", options: ["Defines thread", "Extends class", "Catches errors", "Defines method"], answer: "Defines thread" },
                        { question: "What is 'join()'?", options: ["Waits for thread", "Starts thread", "Stops thread", "Pauses thread"], answer: "Waits for thread" }
                    ]
                },
                PYTHON: {
                    "Python Basics": [
                        { question: "What is the output of print(2 ** 3)?", options: ["6", "8", "9", "12"], answer: "8" },
                        { question: "Which keyword defines a function?", options: ["func", "def", "function", "lambda"], answer: "def" },
                        { question: "What is Python's file extension?", options: [".py", ".java", ".c", ".cpp"], answer: ".py" },
                        { question: "What does 'print' do?", options: ["Outputs to console", "Reads input", "Declares variable", "Loops"], answer: "Outputs to console" },
                        { question: "What is 'None'?", options: ["Null", "Number", "String", "Boolean"], answer: "Null" }
                    ],
                    "Data Types": [
                        { question: "Which is a mutable type?", options: ["Tuple", "String", "List", "Integer"], answer: "List" },
                        { question: "What is a tuple?", options: ["Immutable sequence", "Mutable sequence", "Dictionary", "Set"], answer: "Immutable sequence" },
                        { question: "What does 'len()' return?", options: ["Length", "Sum", "Max", "Min"], answer: "Length" },
                        { question: "What is a dictionary?", options: ["Key-value pairs", "Ordered list", "Immutable set", "Single value"], answer: "Key-value pairs" },
                        { question: "What is a set?", options: ["Unique elements", "Ordered list", "Key-value pairs", "Mutable tuple"], answer: "Unique elements" }
                    ],
                    "Loops & Functions": [
                        { question: "Which loop iterates over a sequence?", options: ["for", "while", "do-while", "if"], answer: "for" },
                        { question: "What is a lambda function?", options: ["Anonymous function", "Named function", "Loop", "Class"], answer: "Anonymous function" },
                        { question: "What does 'break' do?", options: ["Exits loop", "Skips iteration", "Restarts loop", "Pauses loop"], answer: "Exits loop" },
                        { question: "What is list comprehension?", options: ["Concise list creation", "Function definition", "Loop type", "Error handling"], answer: "Concise list creation" },
                        { question: "What does 'return' do?", options: ["Returns value", "Declares variable", "Skips loop", "Prints output"], answer: "Returns value" }
                    ],
                    "OOP in Python": [
                        { question: "What is 'self' in a class?", options: ["Instance", "Method", "Variable", "Loop"], answer: "Instance" },
                        { question: "What is a class?", options: ["Blueprint", "Object", "Function", "Variable"], answer: "Blueprint" },
                        { question: "What is inheritance in Python?", options: ["Class reuse", "Function call", "Loop type", "Data type"], answer: "Class reuse" },
                        { question: "What is a method?", options: ["Function in class", "Variable", "Loop", "Module"], answer: "Function in class" },
                        { question: "What is '__init__'?", options: ["Constructor", "Destructor", "Variable", "Loop"], answer: "Constructor" }
                    ],
                    "Modules": [
                        { question: "What does 'import' do?", options: ["Includes module", "Exports module", "Defines function", "Prints output"], answer: "Includes module" },
                        { question: "What is a module?", options: ["Reusable code", "Class", "Loop", "Variable"], answer: "Reusable code" },
                        { question: "Which module is for math operations?", options: ["math", "os", "sys", "time"], answer: "math" },
                        { question: "What is 'pip'?", options: ["Package installer", "Module", "Function", "Loop"], answer: "Package installer" },
                        { question: "What does 'from' in import do?", options: ["Specifies source", "Defines variable", "Loops module", "Prints module"], answer: "Specifies source" }
                    ]
                },
                ARRAYS: {
                    "1D Arrays": [
                        { question: "What is a 1D array?", options: ["Single row", "Matrix", "Tree", "Graph"], answer: "Single row" },
                        { question: "How to access an array element?", options: ["array[index]", "array(index)", "array.index", "array->index"], answer: "array[index]" },
                        { question: "What is the first index of an array in C?", options: ["0", "1", "-1", "2"], answer: "0" },
                        { question: "What happens if you access array[-1]?", options: ["Undefined behavior", "First element", "Last element", "Error"], answer: "Undefined behavior" },
                        { question: "How to declare an array in C?", options: ["int arr[]", "int arr()", "int arr{}", "int arr<>"], answer: "int arr[]" }
                    ],
                    "2D Arrays": [
                        { question: "What is a 2D array?", options: ["Matrix", "Single row", "Tree", "Graph"], answer: "Matrix" },
                        { question: "How to access 2D array element?", options: ["arr[i][j]", "arr(i,j)", "arr[i,j]", "arr->i->j"], answer: "arr[i][j]" },
                        { question: "What is arr[2][3] in C?", options: ["2 rows, 3 columns", "3 rows, 2 columns", "2 elements", "3 elements"], answer: "2 rows, 3 columns" },
                        { question: "How to initialize a 2D array?", options: ["{{1,2},{3,4}}", "(1,2,3,4)", "[1,2,3,4]", "{1,2,3,4}"], answer: "{{1,2},{3,4}}" },
                        { question: "What is row-major order?", options: ["Rows stored first", "Columns stored first", "Diagonal stored", "Random order"], answer: "Rows stored first" }
                    ],
                    "Array Sorting": [
                        { question: "What is Bubble Sort's time complexity?", options: ["O(n^2)", "O(n)", "O(n log n)", "O(1)"], answer: "O(n^2)" },
                        { question: "Which sort is most efficient for large data?", options: ["Quick Sort", "Bubble Sort", "Selection Sort", "Insertion Sort"], answer: "Quick Sort" },
                        { question: "What does Selection Sort do?", options: ["Selects min element", "Swaps adjacent", "Divides array", "Merges arrays"], answer: "Selects min element" },
                        { question: "What is Merge Sort's space complexity?", options: ["O(n)", "O(1)", "O(n^2)", "O(log n)"], answer: "O(n)" },
                        { question: "What is Insertion Sort best for?", options: ["Small arrays", "Large arrays", "Random arrays", "Sorted arrays"], answer: "Small arrays" }
                    ],
                    "Searching in Arrays": [
                        { question: "What is Binary Search's time complexity?", options: ["O(log n)", "O(n)", "O(n^2)", "O(1)"], answer: "O(log n)" },
                        { question: "What must be true for Binary Search?", options: ["Array is sorted", "Array is unsorted", "Array is empty", "Array is 2D"], answer: "Array is sorted" },
                        { question: "What is Linear Search's time complexity?", options: ["O(n)", "O(log n)", "O(n^2)", "O(1)"], answer: "O(n)" },
                        { question: "Which search returns first occurrence?", options: ["Linear Search", "Binary Search", "Jump Search", "Exponential Search"], answer: "Linear Search" },
                        { question: "What is Jump Search's step size?", options: ["sqrt(n)", "n/2", "log n", "n"], answer: "sqrt(n)" }
                    ],
                    "Array Rotations": [
                        { question: "What is array rotation?", options: ["Shifting elements", "Sorting elements", "Reversing array", "Deleting elements"], answer: "Shifting elements" },
                        { question: "What is the time complexity of one rotation?", options: ["O(n)", "O(1)", "O(n^2)", "O(log n)"], answer: "O(n)" },
                        { question: "How to rotate array left by one?", options: ["Shift all left", "Shift all right", "Reverse array", "Swap ends"], answer: "Shift all left" },
                        { question: "What is Juggling Algorithm used for?", options: ["Array rotation", "Array sorting", "Array searching", "Array merging"], answer: "Array rotation" },
                        { question: "What does reversal algorithm do?", options: ["Rotates array", "Sorts array", "Searches array", "Merges array"], answer: "Rotates array" }
                    ]
                },
                "DATA STRUCTURES": {
                    "Arrays & Linked Lists": [
                        { question: "What is a linked list?", options: ["Nodes with pointers", "Fixed-size array", "Tree structure", "Graph"], answer: "Nodes with pointers" },
                        { question: "What is the time complexity to access an array element?", options: ["O(1)", "O(n)", "O(log n)", "O(n^2)"], answer: "O(1)" },
                        { question: "What is a doubly linked list?", options: ["Two pointers per node", "One pointer", "No pointers", "Array"], answer: "Two pointers per node" },
                        { question: "What is the time complexity to insert in linked list?", options: ["O(n)", "O(1)", "O(log n)", "O(n^2)"], answer: "O(1)" },
                        { question: "What is a circular linked list?", options: ["Last node to first", "No pointers", "Fixed size", "Tree"], answer: "Last node to first" }
                    ],
                    "Stacks & Queues": [
                        { question: "What is a stack?", options: ["LIFO", "FIFO", "Random", "Sorted"], answer: "LIFO" },
                        { question: "What is a queue?", options: ["FIFO", "LIFO", "Random", "Sorted"], answer: "FIFO" },
                        { question: "What is stack's push operation?", options: ["Add to top", "Remove from top", "Add to bottom", "Remove from bottom"], answer: "Add to top" },
                        { question: "What is a deque?", options: ["Double-ended queue", "Single-ended queue", "Stack", "Tree"], answer: "Double-ended queue" },
                        { question: "What is stack's pop operation?", options: ["Remove from top", "Add to top", "Remove from bottom", "Add to bottom"], answer: "Remove from top" }
                    ],
                    "Trees": [
                        { question: "What is a binary tree?", options: ["At most two children", "One child", "Many children", "No children"], answer: "At most two children" },
                        { question: "What is a BST?", options: ["Binary Search Tree", "Binary Tree", "Balanced Tree", "Heap"], answer: "Binary Search Tree" },
                        { question: "What is an AVL tree?", options: ["Balanced BST", "Unbalanced BST", "Binary Tree", "Heap"], answer: "Balanced BST" },
                        { question: "What is tree traversal?", options: ["Visiting nodes", "Sorting nodes", "Deleting nodes", "Merging nodes"], answer: "Visiting nodes" },
                        { question: "What is a leaf node?", options: ["No children", "One child", "Two children", "Root"], answer: "No children" }
                    ],
                    "Graphs": [
                        { question: "What is a graph?", options: ["Nodes and edges", "Array", "Tree", "Stack"], answer: "Nodes and edges" },
                        { question: "What is BFS?", options: ["Breadth-First Search", "Depth-First Search", "Binary Search", "Linear Search"], answer: "Breadth-First Search" },
                        { question: "What is DFS?", options: ["Depth-First Search", "Breadth-First Search", "Binary Search", "Linear Search"], answer: "Depth-First Search" },
                        { question: "What is a directed graph?", options: ["Edges with direction", "No edges", "Undirected edges", "Tree"], answer: "Edges with direction" },
                        { question: "What is an adjacency list?", options: ["Graph representation", "Array", "Stack", "Queue"], answer: "Graph representation" }
                    ],
                    "Hashing": [
                        { question: "What is a hash table?", options: ["Key-value storage", "Array", "Tree", "Graph"], answer: "Key-value storage" },
                        { question: "What is a hash function?", options: ["Maps key to index", "Sorts keys", "Searches keys", "Deletes keys"], answer: "Maps key to index" },
                        { question: "What is collision in hashing?", options: ["Same index for keys", "Different indices", "No keys", "Sorted keys"], answer: "Same index for keys" },
                        { question: "What is chaining?", options: ["Linked list for collisions", "Array for collisions", "Tree for collisions", "No collisions"], answer: "Linked list for collisions" },
                        { question: "What is open addressing?", options: ["Probing for collisions", "Chaining", "Sorting keys", "Deleting keys"], answer: "Probing for collisions" }
                    ]
                }
            };

            const LoginPage = ({ onLogin }) => {
                const [isSignup, setIsSignup] = useState(false);
                const [name, setName] = useState("");
                const [email, setEmail] = useState("");
                const [password, setPassword] = useState("");
                const [error, setError] = useState("");

                const handleLogin = () => {
                    console.log("Attempting login with:", { email, password });
                    if (email && password) {
                        onLogin({ name: "User", email });
                    } else {
                        setError("Please fill in all fields");
                        console.error("Login failed: Missing fields");
                    }
                };

                const handleSignup = () => {
                    console.log("Attempting signup with:", { name, email, password });
                    if (name && email && password) {
                        onLogin({ name, email });
                    } else {
                        setError("Please fill in all fields");
                        console.error("Signup failed: Missing fields");
                    }
                };

                const toggleForm = () => {
                    setIsSignup(!isSignup);
                    setError("");
                    console.log("Toggled form to:", isSignup ? "Login" : "Signup");
                };

                return (
                    <div className="flex items-center justify-center h-screen bg-gradient-to-r from-pink-200 to-blue-200">
                        <div className="bg-white p-8 rounded-lg shadow-lg w-96">
                            <h2 className="text-2xl font-bold mb-6 text-center">{isSignup ? "Sign Up" : "Login"}</h2>
                            {isSignup && (
                                <input
                                    type="text"
                                    placeholder="Name"
                                    className="w-full p-2 mb-4 border rounded"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                />
                            )}
                            <input
                                type="email"
                                placeholder="Email"
                                className="w-full p-2 mb-4 border rounded"
                                value={email}
                                onChange={(e) => setEmail(e.target.value)}
                            />
                            <input
                                type="password"
                                placeholder="Password"
                                className="w-full p-2 mb-4 border rounded"
                                value={password}
                                onChange={(e) => setPassword(e.target.value)}
                            />
                            {error && <p className="text-red-500 mb-4">{error}</p>}
                            <button
                                className="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600"
                                onClick={isSignup ? handleSignup : handleLogin}
                            >
                                {isSignup ? "Sign Up" : "Login"}
                            </button>
                            <div
                                className="text-center mt-4 text-blue-500 cursor-pointer"
                                onClick={toggleForm}
                            >
                                {isSignup ? "Already have an account? Login" : "Don't have an account? Sign Up"}
                            </div>
                        </div>
                    </div>
                );
            };

            const ThankYouPage = ({ onGoToDashboard }) => (
                <div className="flex items-center justify-center h-screen bg-gradient-to-r from-pink-200 to-blue-200">
                    <div className="bg-white p-8 rounded-lg shadow-lg w-96 text-center">
                        <h2 className="text-2xl font-bold mb-6">Thanks for Logging In!</h2>
                        <button
                            className="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600"
                            onClick={() => { console.log("Navigating to Dashboard"); onGoToDashboard(); }}
                        >
                            Go to Dashboard
                        </button>
                    </div>
                </div>
            );

            const ExitConfirmation = ({ onConfirm, onCancel }) => (
                <div className="flex items-center justify-center h-screen bg-gradient-to-r from-pink-200 to-blue-200">
                    <div className="bg-white p-8 rounded-lg shadow-lg w-96 text-center">
                        <h2 className="text-xl font-bold mb-4">Are you sure you want to exit the app?</h2>
                        <div className="flex justify-center gap-4">
                            <button
                                className="bg-red-500 text-white p-2 rounded hover:bg-red-600"
                                onClick={() => { console.log("Exit confirmed"); onConfirm(); }}
                            >
                                Yes
                            </button>
                            <button
                                className="bg-gray-500 text-white p-2 rounded hover:bg-gray-600"
                                onClick={() => { console.log("Exit cancelled"); onCancel(); }}
                            >
                                No
                            </button>
                        </div>
                    </div>
                </div>
            );

            const Dashboard = ({ user, onSelectSubject }) => {
                const [showProfile, setShowProfile] = useState(false);

                return (
                    <div className="p-8 bg-gradient-to-r from-pink-200 to-blue-200 min-h-screen">
                        <div
                            className="absolute top-5 right-5 bg-white w-10 h-10 rounded-full flex items-center justify-center text-xl shadow-md cursor-pointer"
                            onClick={() => { console.log("Toggling profile"); setShowProfile(!showProfile); }}
                        >
                            ðŸ‘¤
                        </div>
                        {showProfile && (
                            <div className="absolute top-16 right-5 bg-white p-4 rounded-lg shadow-lg w-56">
                                <p><strong>Name:</strong> {user.name}</p>
                                <p><strong>Email:</strong> {user.email}</p>
                                <p><strong>Subjects:</strong> {subjects.map(s => s.name).join(", ")}</p>
                            </div>
                        )}
                        <h2 className="text-3xl font-bold mb-8">Welcome, {user.name}!</h2>
                        <div className="grid grid-cols-2 gap-8">
                            {subjects.map((subject) => (
                                <div
                                    key={subject.name}
                                    className={`${subject.color} text-white p-6 rounded-lg shadow-md cursor-pointer text-center text-xl font-bold hover:opacity-90`}
                                    onClick={() => { console.log(`Selected subject: ${subject.name}`); onSelectSubject(subject.name); }}
                                >
                                    {subject.name}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            };

            const SubtopicsPage = ({ subject, onSelectSubtopic, onBack }) => {
                const [showExitConfirm, setShowExitConfirm] = useState(false);

                const handleBack = () => {
                    console.log("Attempting to go back to Dashboard");
                    setShowExitConfirm(true);
                };

                const confirmExit = (exit) => {
                    if (exit) {
                        console.log("Confirmed back to Dashboard");
                        onBack();
                    } else {
                        console.log("Cancelled back to Dashboard");
                    }
                    setShowExitConfirm(false);
                };

                if (showExitConfirm) {
                    return <ExitConfirmation onConfirm={() => confirmExit(true)} onCancel={() => confirmExit(false)} />;
                }

                return (
                    <div className="p-8 bg-gradient-to-r from-pink-200 to-blue-200 min-h-screen">
                        <h2 className="text-2xl font-bold mb-6">{subject} Subtopics</h2>
                        <div className="grid grid-cols-2 gap-4">
                            {subtopics[subject].map((subtopic) => (
                                <button
                                    key={subtopic.name}
                                    className={`${subtopic.color} text-white p-4 rounded-lg hover:opacity-90`}
                                    onClick={() => { console.log(`Selected subtopic: ${subtopic.name}`); onSelectSubtopic(subtopic.name); }}
                                >
                                    {subtopic.name}
                                </button>
                            ))}
                        </div>
                        <button
                            className="mt-4 bg-gray-500 text-white p-2 rounded hover:bg-gray-600"
                            onClick={handleBack}
                        >
                            Back to Dashboard
                        </button>
                    </div>
                );
            };

            const QuizPage = ({ subject, subtopic, onBack }) => {
                const [currentQuestion, setCurrentQuestion] = useState(0);
                const [score, setScore] = useState(0);
                const [timeLeft, setTimeLeft] = useState(600); // 10 minutes
                const [selectedAnswer, setSelectedAnswer] = useState(null);
                const [isCorrect, setIsCorrect] = useState(null);
                const [quizCompleted, setQuizCompleted] = useState(false);
                const [showExitConfirm, setShowExitConfirm] = useState(false);

                useEffect(() => {
                    if (!quizCompleted && !showExitConfirm && timeLeft > 0) {
                        const timer = setInterval(() => setTimeLeft(timeLeft - 1), 1000);
                        return () => clearInterval(timer);
                    } else if (timeLeft === 0) {
                        console.log("Quiz timer expired");
                        setQuizCompleted(true);
                    }
                }, [timeLeft, quizCompleted, showExitConfirm]);

                const handleAnswer = (option) => {
                    if (selectedAnswer) return;
                    console.log(`Selected answer: ${option}`);
                    setSelectedAnswer(option);
                    const correct = option === quizQuestions[subject][subtopic][currentQuestion].answer;
                    setIsCorrect(correct);
                    if (correct) {
                        setScore(score + 10);
                        console.log("Correct answer! Score:", score + 10);
                    } else {
                        console.log("Incorrect answer");
                    }
                    setTimeout(() => {
                        setSelectedAnswer(null);
                        setIsCorrect(null);
                        if (currentQuestion + 1 < quizQuestions[subject][subtopic].length) {
                            console.log("Moving to next question");
                            setCurrentQuestion(currentQuestion + 1);
                            setTimeLeft(600);
                        } else {
                            console.log("Quiz completed");
                            setQuizCompleted(true);
                        }
                    }, 1000);
                };

                const handleBack = () => {
                    console.log("Attempting to go back to Subtopics");
                    setShowExitConfirm(true);
                };

                const confirmExit = (exit) => {
                    if (exit) {
                        console.log("Confirmed back to Subtopics");
                        onBack();
                    } else {
                        console.log("Cancelled back to Subtopics");
                    }
                    setShowExitConfirm(false);
                };

                if (showExitConfirm) {
                    return <ExitConfirmation onConfirm={() => confirmExit(true)} onCancel={() => confirmExit(false)} />;
                }

                if (quizCompleted) {
                    return (
                        <div className="p-8 bg-gradient-to-r from-pink-200 to-blue-200 min-h-screen">
                            <h2 className="text-2xl font-bold mb-6">{subtopic} Quiz Completed</h2>
                            <p className="mb-4">Final Score: {score}</p>
                            <button
                                className="bg-gray-500 text-white p-2 rounded hover:bg-gray-600"
                                onClick={handleBack}
                            >
                                Back to Subtopics
                            </button>
                        </div>
                    );
                }

                return (
                    <div className="p-8 bg-gradient-to-r from-pink-200 to-blue-200 min-h-screen">
                        <h2 className="text-2xl font-bold mb-6">{subtopic} Quiz</h2>
                        <p className="mb-4">Time Left: {Math.floor(timeLeft / 60)}:{(timeLeft % 60).toString().padStart(2, '0')}</p>
                        <p className="mb-4">Score: {score}</p>
                        <p className="mb-4">Question {currentQuestion + 1}/5: {quizQuestions[subject][subtopic][currentQuestion].question}</p>
                        <div className="grid grid-cols-2 gap-4">
                            {quizQuestions[subject][subtopic][currentQuestion].options.map((option, index) => (
                                <button
                                    key={index}
                                    className={`p-2 rounded text-white ${
                                        selectedAnswer === option
                                            ? isCorrect
                                                ? "bg-green-500"
                                                : "bg-red-500"
                                            : "bg-blue-500 hover:bg-blue-600"
                                    }`}
                                    onClick={() => handleAnswer(option)}
                                    disabled={selectedAnswer !== null}
                                >
                                    {option}
                                </button>
                            ))}
                        </div>
                        <button
                            className="mt-4 bg-gray-500 text-white p-2 rounded hover:bg-gray-600"
                            onClick={handleBack}
                        >
                            Back to Subtopics
                        </button>
                    </div>
                );
            };

            const App = () => {
                const [user, setUser] = useState(null);
                const [showThankYou, setShowThankYou] = useState(false);
                const [selectedSubject, setSelectedSubject] = useState(null);
                const [selectedSubtopic, setSelectedSubtopic] = useState(null);

                const handleLogin = (userData) => {
                    console.log("User logged in:", userData);
                    setUser(userData);
                    setShowThankYou(true);
                };

                const handleGoToDashboard = () => {
                    console.log("Navigating to Dashboard");
                    setShowThankYou(false);
                };

                const handleSelectSubject = (subject) => {
                    setSelectedSubject(subject);
                };

                const handleSelectSubtopic = (subtopic) => {
                    setSelectedSubtopic(subtopic);
                };

                const handleBackToSubtopics = () => {
                    setSelectedSubtopic(null);
                };

                const handleBackToDashboard = () => {
                    setSelectedSubject(null);
                    setSelectedSubtopic(null);
                };

                console.log("Rendering App, user:", user, "selectedSubject:", selectedSubject, "selectedSubtopic:", selectedSubtopic);

                if (!user) {
                    return <LoginPage onLogin={handleLogin} />;
                }

                if (showThankYou) {
                    return <ThankYouPage onGoToDashboard={handleGoToDashboard} />;
                }

                if (selectedSubtopic) {
                    return <QuizPage subject={selectedSubject} subtopic={selectedSubtopic} onBack={handleBackToSubtopics} />;
                }

                if (selectedSubject) {
                    return <SubtopicsPage subject={selectedSubject} onSelectSubtopic={handleSelectSubtopic} onBack={handleBackToDashboard} />;
                }

                return <Dashboard user={user} onSelectSubject={handleSelectSubject} />;
            };

            console.log("Rendering ReactDOM...");
            ReactDOM.render(<App />, document.getElementById("root"));
            console.log("App rendered successfully");
            document.getElementById("fallback").style.display = "none";
        } catch (e) {
            console.error("Error loading app:", e.message, e.stack);
            document.getElementById("error").innerText = "Error loading app: " + e.message + ". Check console for details.";
            document.getElementById("fallback").style.display = "none";
        }
    </script>
</body>
</html>